<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><title>Java异常处理及应用 | vic的博客</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="minfive"><meta name="keywords" content="前端博客, 前端, 程序员, 前端开发, 全栈开发, node.js, javascript"><meta name="description" content="日常学习与兴趣交流"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://fuyong.net.cn/2018/03/14/java-exception-apply/index.html"><link rel="icon" type="image/png" href="/img/favicon.ico" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="vic的博客"><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(/img/loader.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="vic的博客" alt="vic的博客"><img src="/img/logo.png" alt="vic的博客"></a><nav class="page__nav"><ul class="nav__list clearfix"></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="/img/banner-bg.jpg" alt="Java异常处理及应用"></div><header class="post__info"><h1 class="post__title">Java异常处理及应用</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/">undefined</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2018-03-14</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/Java/">Java</a></li></ul></div></div></header><div class="post__content"><p>Java 异常处理是使用 Java语言进行软件开发和测试脚本开发时不容忽视的问题之一，是否进行异常处理直接关系到软件的稳定性和健壮性。<br><a id="more"></a></p><h3 id="Java异常的层次结构"><a href="#Java异常的层次结构" class="headerlink" title="Java异常的层次结构"></a>Java异常的层次结构</h3><p>在使用Java异常处理之前我们需要先了解一下Java异常类的层次结构。在Java中，所有的异常类都有一个共同的祖先Throwable（可抛出），Throwable有两个非常重要的子类Exception（异常）、Error（错误）。这两个类各自又包含了各自众多的之类。</p><h3 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h3><p>Exception是应用程序中可能的可预测、可恢复的问题，异常一般是在特定的环境下出现。它有一个重要的子类RuntimeException（运行时异常），RuntimeException类及其子类表示<em>JVM常用操作</em>引发的错误。例如，若试图使用空值对象引用、除数为零或数组越界，则分别引发运行时异常（NullPointerException、ArithmeticException）和 ArrayIndexOutOfBoundException。</p><h3 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h3><p>Error是应用程序中发生了较严重的错误，大多数的错误与代码编写操作的执行无关，而是代码运行时JVM出现的问题，比如，但JVM没有持续操作所需的资源时会抛出OutOfMemoryError。</p><h3 id="Java异常处理的分类"><a href="#Java异常处理的分类" class="headerlink" title="Java异常处理的分类"></a>Java异常处理的分类</h3><p>Java异常处理可分为三类：可检测异常（checked exception）、非检测异常（unchecked exception）和自定义异常</p><h4 id="可检测异常（checked-exception）"><a href="#可检测异常（checked-exception）" class="headerlink" title="可检测异常（checked exception）"></a>可检测异常（checked exception）</h4><p>可检测异常经编译器验证，对于声明抛出异常的任何方法，编译器将强制执行处理或声明规则，例如：sqlExecption 这个异常就是一个检测异常。你连接 JDBC 时，不捕捉这个异常，编译器就通不过，不允许编译。</p><h4 id="非检测异常"><a href="#非检测异常" class="headerlink" title="非检测异常"></a>非检测异常</h4><p>非检测异常不遵循处理或声明规则。在产生此类异常时，不一定非要采取任何适当操作，编译器不会检查是否已解决了这样一个异常。例如：一个数组为 3 个长度，当你使用下标为３时，就会产生数组下标越界异常。这个异常 JVM 不会进行检测，要靠程序员来判断。有两个主要类定义非检测异常：RuntimeException 和 Error。<br>Error 子类属于非检测异常，因为无法预知它们的产生时间。若 Java 应用程序内存不足，则随时可能出现 OutOfMemoryError；起因一般不是应用程序的特殊调用，而是 JVM 自身的问题。另外，Error 一般表示应用程序无法解决的严重问题。<br>RuntimeException 类也属于非检测异常，因为普通 JVM 操作引发的运行时异常随时可能发生，此类异常一般是由特定操作引发。但这些操作在 Java 应用程序中会频繁出现。因此，它们不受编译器检查与处理或声明规则的限制。</p><h4 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h4><p>自定义异常是为了表示应用程序的一些错误类型，为代码可能发生的一个或多个问题提供新含义。可以显示代码多个位置之间的错误的相似性，也可以区分代码运行时可能出现的相似问题的一个或者多个错误，或给出应用程序中一组错误的特定含义。例如，对队列进行操作时，有可能出现两种情况：空队列时试图删除一个元素；满队列时试图添加一个元素。则需要自定义两个异常来处理这两种情况。</p><h3 id="Java异常的处理"><a href="#Java异常的处理" class="headerlink" title="Java异常的处理"></a>Java异常的处理</h3><p>在Java中，异常处理的方式有两种：异常处理和声明异常</p><h4 id="处理异常：try、catch-和-finally"><a href="#处理异常：try、catch-和-finally" class="headerlink" title="处理异常：try、catch 和 finally"></a>处理异常：try、catch 和 finally</h4><ul><li>try 块：将一个或者多个语句放入try时，则表示这些语句可能抛出异常。</li><li>catch 块：当问题出现时，一种选择是定义代码块来处理问题，catch 块的目的便在于此。catch 块是 try 块所产生异常的接收者。基本原理是：一旦生成异常，则 try 块的执行中止，JVM 将查找相应的 JVM。</li><li>finally 块：还可以定义 finally 块，无论运行 try 块代码的结果如何，该块里面的代码一定运行。在常见的所有环境中，finally 块都将运行。无论 try 块是否运行完，无论是否产生异常，也无论是否在 catch 块中得到处理，finally 块都将执行。<br><strong>try-catch-finally 规则：</strong></li><li>必须在 try 之后添加 catch 或 finally 块。try 块后可同时接 catch 和 finally 块，但至少有一个块。</li><li>必须遵循块顺序：若代码同时使用 catch 和 finally 块，则必须将 catch 块放在 try 块之后。catch 块与相应的异常类的类型相关。</li><li>一个 try 块可能有多个 catch 块。若如此，则执行第一个匹配块。</li><li>可嵌套 try-catch-finally 结构。</li><li>在 try-catch-finally 结构中，可重新抛出异常。</li><li>除了下列情况，总将执行 finally 做为结束：JVM 过早终止（调用 System.exit(int)）；在 finally 块中抛出一个未处理的异常；计算机断电、失火、或遭遇病毒攻击。<h4 id="声明异常"><a href="#声明异常" class="headerlink" title="声明异常"></a>声明异常</h4>声明异常必须将throws关键字添加至方法签名快的最后位置。<br><strong>声明异常的规则:</strong></li><li>必须声明方法可抛出的任何可检测异常（checked exception）。</li><li>非检测性异常（unchecked exception）不是必须的，可声明，也可不声明。</li><li>调用方法必须遵循任何可检测异常的处理和声明规则。若覆盖一个方法，则不能声明与覆盖方法不同的异常。声明的任何异常必须是被覆盖方法所声明异常的同类或子类。</li></ul><h3 id="Java-异常处理的应用"><a href="#Java-异常处理的应用" class="headerlink" title="Java 异常处理的应用"></a>Java 异常处理的应用</h3><p>说到异常处理的应用，银行取钱这个场景非常适合，在定义银行类时，若取钱数大于余额时需要做异常处理。<br>定义一个异常类 insufficientFundsException。取钱（withdrawal）方法中可能产生异常，条件是余额小于取额。<br>处理异常在调用 withdrawal 的时候，因此 withdrawal 方法要声明抛出异常，由上一级方法调用。<br>异常类：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InsufficientFundsException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">   	<span class="keyword">private</span> Bank  excepbank;      <span class="comment">// 银行对象</span></span><br><span class="line">   	<span class="keyword">private</span> <span class="keyword">double</span> excepAmount;   <span class="comment">// 要取的钱</span></span><br><span class="line">   	InsufficientFundsException(Bank ba, <span class="keyword">double</span>  dAmount) &#123;  </span><br><span class="line">   	   excepbank=ba;</span><br><span class="line">       excepAmount=dAmount;</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="function"><span class="keyword">public</span> String <span class="title">excepMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   		String str=<span class="string">"The balance is"</span>+excepbank.balance + <span class="string">"\n"</span>+<span class="string">"The withdrawal was"</span>+excepAmount;</span><br><span class="line">   	  	<span class="keyword">return</span> str;</span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>银行类：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span> </span>&#123;</span><br><span class="line">   	<span class="keyword">double</span> balance;<span class="comment">// 存款数</span></span><br><span class="line">   	Bank (<span class="keyword">double</span>  balance) &#123;</span><br><span class="line">   		<span class="keyword">this</span>.balance=balance;</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposite</span><span class="params">(<span class="keyword">double</span> dAmount)</span> </span>&#123;</span><br><span class="line">   		<span class="keyword">if</span>(dAmount &gt; <span class="number">0.0</span>) &#123;</span><br><span class="line">   			balance += dAmount;</span><br><span class="line">   		&#125;</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdrawal</span><span class="params">(<span class="keyword">double</span> dAmount)</span> <span class="keyword">throws</span> InsufficientFundsException</span>&#123;</span><br><span class="line">   		<span class="keyword">if</span> (balance &lt; dAmount) &#123;</span><br><span class="line">   			<span class="keyword">throw</span> <span class="keyword">new</span> InsufficientFundsException(<span class="keyword">this</span>, dAmount);</span><br><span class="line">         &#125;</span><br><span class="line">      	balance = balance - dAmount;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showBalance</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"The balance is "</span>+(<span class="keyword">int</span>)balance);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>调用：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionDemo</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">	   <span class="keyword">try</span> &#123;</span><br><span class="line">	         Bank ba = <span class="keyword">new</span> Bank(<span class="number">50</span>);</span><br><span class="line">	      	ba.withdrawal(<span class="number">100</span>);</span><br><span class="line">	      	System.out.println(<span class="string">"Withdrawal successful!"</span>);</span><br><span class="line">	    &#125; <span class="keyword">catch</span> (InsufficientFundsException e) &#123; </span><br><span class="line">	      	System.out.println(e.toString());</span><br><span class="line">	      	System.out.println(e.excepMessage());</span><br><span class="line">	  	&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><div class="post-announce">感谢您的阅读，本文由 <a href="http://fuyong.net.cn">vic的博客</a> 版权所有。如若转载，请注明出处：vic的博客（<a href="http://fuyong.net.cn/2018/03/14/java-exception-apply/">http://fuyong.net.cn/2018/03/14/java-exception-apply/</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/2018/03/14/java-disabuse/" title="Java解惑"><i class="iconfont icon-prev"></i>Java解惑</a></div><div class="post__prev post__prev--right"><a href="/2018/03/14/一张图教你如何学习新技术/" title="一张图教你如何学习新技术">一张图教你如何学习新技术<i class="iconfont icon-next"></i></a></div></div></div></article></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">日常学习与兴趣交流</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/感悟/">感悟</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/工具/">工具</a><span class="block-list-count">5</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/工作记录/">工作记录</a><span class="block-list-count">5</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/学习记录/">学习记录</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Java/">Java</a><span class="block-list-count">3</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2020/03/01/Python包管理/" title="Python包管理"><div class="item__cover"><img src="/img/banner-bg.jpg" alt="Python包管理"></div><div class="item__info"><h3 class="item__title">Python包管理</h3><span class="item__text">2020-03-01</span></div></a></li><li class="latest-post-item"><a href="/2018/03/28/Intellij IDEA快捷键介绍-常用篇/" title="Intellij IDEA快捷键介绍-常用篇"><div class="item__cover"><img src="/img/banner-bg.jpg" alt="Intellij IDEA快捷键介绍-常用篇"></div><div class="item__info"><h3 class="item__title">Intellij IDEA快捷键介绍-常用篇</h3><span class="item__text">2018-03-28</span></div></a></li><li class="latest-post-item"><a href="/2018/03/18/Nginx系列 一   配置介绍/" title="Nginx系列<一>  配置介绍"><div class="item__cover"><img src="/img/banner-bg.jpg" alt="Nginx系列<一>  配置介绍"></div><div class="item__info"><h3 class="item__title">Nginx系列<一>配置介绍</一></h3><span class="item__text">2018-03-18</span></div></a></li><li class="latest-post-item"><a href="/2018/03/15/Neo4j-Cypher语言语法/" title="Neo4j-Cypher语言语法"><div class="item__cover"><img src="/img/banner-bg.jpg" alt="Neo4j-Cypher语言语法"></div><div class="item__info"><h3 class="item__title">Neo4j-Cypher语言语法</h3><span class="item__text">2018-03-15</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/Intellij-IDEA/">Intellij IDEA</a></li><li class="tag-item"><a class="tag-link" href="/tags/Intellij-IDEA-Upsource/">Intellij IDEA Upsource</a></li><li class="tag-item"><a class="tag-link" href="/tags/Jasypt/">Jasypt</a></li><li class="tag-item"><a class="tag-link" href="/tags/Java/">Java</a></li><li class="tag-item"><a class="tag-link" href="/tags/Linux-vim/">Linux vim</a></li><li class="tag-item"><a class="tag-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-item"><a class="tag-link" href="/tags/Neo4j/">Neo4j</a></li><li class="tag-item"><a class="tag-link" href="/tags/Nginx/">Nginx</a></li><li class="tag-item"><a class="tag-link" href="/tags/python/">python</a></li><li class="tag-item"><a class="tag-link" href="/tags/学习方法/">学习方法</a></li><li class="tag-item"><a class="tag-link" href="/tags/感悟/">感悟</a></li><li class="tag-item"><a class="tag-link" href="/tags/金融/">金融</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">关于</h3><div class="item__content"><p class="item__text">分享日常学习、生活及工作的一些心得总结，欢迎点击右下角订阅 rss。</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Shenzhen, Guangdong Province, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>fuyungcn@gmail.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="/img/qrcode.png" alt="logo" title="vic的博客"></div><div class="footer-top__item"><h3 class="item__title">友情链接</h3><div class="item__content"><ul class="footer-top__list"><li class="list-item"><a href="https://github.com/Mrminfive/hexo-theme-skapp" title="hexo-theme-skapp" target="_blank">hexo-theme-skapp</a></li></ul></div></div><div class="footer-top__item"><h3 class="item__title">构建工具</h3><div class="item__content"><ul class="footer-top__list"><li class="list-item"><a href="https://hexo.io/" title="Blog Framework" target="_blank">Hexo</a></li><li class="list-item"><a href="https://github.com/Mrminfive/hexo-theme-skapp" title="hexo-theme-skapp" target="_blank">hexo-theme-skapp</a></li></ul></div></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/FuYung" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:fuyungcn@gmail.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li><li class="social-network__item"><a href="/atom.xml" target="_blank" title="rss"><i class="iconfont icon-rss"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>